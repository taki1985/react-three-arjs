{"version":3,"file":"arCanvas.js","names":["_react","_interopRequireDefault","require","_fiber","_ar","_excluded","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_extends","Object","assign","bind","target","i","arguments","length","source","key","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","TypeError","Number","eventManagerFactory","state","events","compute","event","pointer","set","clientX","size","width","clientY","height","raycaster","setFromCamera","camera","ARCanvas","_ref","_ref$arEnabled","arEnabled","_ref$tracking","tracking","children","_ref$patternRatio","patternRatio","_ref$detectionMode","detectionMode","_ref$cameraParameters","cameraParametersUrl","_ref$matrixCodeType","matrixCodeType","_ref$sourceType","sourceType","_ref$sourceWidth","sourceWidth","_ref$sourceHeight","sourceHeight","_ref$displayWidth","displayWidth","_ref$displayHeight","displayHeight","onCameraStreamReady","onCameraStreamError","props","createElement","Canvas","position","AR","_default","exports"],"sources":["../../src/ar/arCanvas.js"],"sourcesContent":["/* eslint-disable indent */\n/* eslint-disable react/jsx-indent */\n/* eslint-disable react/jsx-pascal-case */\n\nimport React from \"react\"\nimport { Canvas, events } from \"@react-three/fiber\"\n\nimport { AR } from \"./ar\"\n\nconst eventManagerFactory = state => ({\n  ...events(state),\n\n  compute(event, state) {\n    state.pointer.set(\n      (event.clientX / state.size.width) * 2 - 1,\n      -(event.clientY / state.size.height) * 2 + 1,\n    )\n    state.raycaster.setFromCamera(state.pointer, state.camera)\n  },\n})\n\nconst ARCanvas = ({\n  arEnabled = true,\n  tracking = true,\n  children,\n  patternRatio = 0.5,\n  detectionMode = \"mono_and_matrix\",\n  cameraParametersUrl = \"data/camera_para.dat\",\n  matrixCodeType = \"3x3\",\n  sourceType = \"webcam\",\n  sourceWidth = 640,\n  sourceHeight = 480,\n  displayWidth = 640,\n  displayHeight = 480,\n  onCameraStreamReady,\n  onCameraStreamError,\n  ...props\n}) => (\n  <Canvas\n    events={eventManagerFactory}\n    camera={arEnabled ? { position: [0, 0, 0] } : props.camera}\n    {...props}>\n    {arEnabled ? (\n      <AR\n        tracking={tracking}\n        patternRatio={patternRatio}\n        matrixCodeType={matrixCodeType}\n        detectionMode={detectionMode}\n        sourceType={sourceType}\n        sourceWidth={sourceWidth} sourceHeight={sourceHeight} displayWidth={displayWidth} displayHeight={displayHeight}\n        cameraParametersUrl={cameraParametersUrl}\n        onCameraStreamReady={onCameraStreamReady}\n        onCameraStreamError={onCameraStreamError}>\n        {children}\n      </AR>\n    ) : (\n      children\n    )}\n  </Canvas>\n)\n\nexport default ARCanvas\n"],"mappings":"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"}